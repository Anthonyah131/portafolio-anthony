---
import Layout from "../layouts/Layout.astro";
import HeroSceneDynamic from "../components/HeroSceneDynamic";
import Header from "../components/Header";
import HomeSection from "../components/sections/HomeSection";
import AboutSection from "../components/sections/AboutSection";
import SkillsSection from "../components/sections/SkillsSection";
import ProjectsSection from "../components/sections/ProjectsSection";
import ContactSection from "../components/sections/ContactSection";
import PortfolioWrapper from "../components/PortfolioWrapper";
---

<Layout title="Anthony's Portfolio">
  <PortfolioWrapper client:only="react">
    <Header client:only="react" />

  <!-- Canvas 3D solo en desktop (lg y superior) -->
  <div id="three-background" class="hidden lg:block">
    <HeroSceneDynamic client:only="react" />
  </div>

  <!-- Fondo degradado para móviles/tablets -->
  <div id="mobile-background" class="lg:hidden fixed inset-0 -z-10">
    <div class="absolute inset-0 bg-linear-to-b from-black to-slate-900"></div>
    <div class="absolute inset-0 opacity-30">
      <div
        class="absolute top-0 left-0 w-full h-1/5 bg-linear-to-b from-blue-500/20 to-transparent"
      >
      </div>
      <div
        class="absolute bottom-0 left-0 w-full h-1/5 bg-linear-to-t from-purple-500/20 to-transparent"
      >
      </div>
    </div>
  </div>

  <div id="content-sections">
    <HomeSection client:only="react" />
    <AboutSection client:only="react" />
    <SkillsSection client:only="react" />
    <ProjectsSection client:only="react" />
    <ContactSection client:only="react" />
  </div>
  </PortfolioWrapper>

  <style is:global>
    html,
    body {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      overflow-x: hidden;
    }

    @media (prefers-reduced-motion: no-preference) {
      html {
        scroll-behavior: smooth;
      }
    }

    #three-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      z-index: 1;
      pointer-events: auto;
    }

    /* Fondo para móviles y tablets */
    #mobile-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
    }

    #three-background.allow-interaction {
      pointer-events: auto;
    }

    #content-sections {
      position: relative;
      z-index: 2;
      pointer-events: none; /* Permitir que eventos pasen al canvas debajo */
    }

    .section-container {
      min-height: 100vh;
      width: 100%;
      background: rgba(0, 0, 20, 0);
      position: relative;
      pointer-events: auto; /* Pero cada sección sí acepta eventos */
    }

    /* En desktop, agregar blur sutil */
    @media (min-width: 1024px) {
      .section-container {
        backdrop-filter: blur(0.5px);
      }
    }

    /* En móviles, agregar separadores visuales sutiles entre secciones */
    @media (max-width: 1023px) {
      .section-container:not(:last-child) {
        border-bottom: 1px solid rgba(110, 198, 255, 0.1);
      }
    }

    /* La sección About debe permitir eventos al canvas debajo */
    #about {
      pointer-events: none;
    }

    /* Pero el contenido dentro de About sí debe aceptar clics */
    #about > * {
      pointer-events: auto;
    }

    /* Contact también debe permitir eventos al planeta en el centro */
    #contact {
      pointer-events: none;
    }

    /* Las columnas de Contact sí deben aceptar eventos */
    #contact > * {
      pointer-events: auto;
    }

    /* Simple black scrollbar */
    * {
      scrollbar-width: thin;
      scrollbar-color: rgba(15, 36, 150, 0.5) rgba(0, 0, 0, 1);
    }

    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(0, 0, 0, 0.5);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgba(0, 0, 0, 0.7);
    }
  </style>
</Layout>
